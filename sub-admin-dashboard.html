<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>সাব-অ্যাডমিন ড্যাশবোর্ড</title>
    <style>
        /* CSS স্টাইল */
        body { font-family: Arial, sans-serif; background-color: #e9ebee; margin: 0; padding: 0; }
        header { background-color: #3b5998; color: white; padding: 15px 30px; display: flex; justify-content: space-between; align-items: center; }
        #welcome-message { font-size: 1.2em; }
        #logout-btn { background: #fa383e; color: white; border: none; padding: 8px 15px; border-radius: 4px; cursor: pointer; }
        #content { padding: 30px; }
        /* অন্যান্য ড্যাশবোর্ড স্টাইল */
    </style>
    
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script> 
</head>
<body>
    <header>
        <div id="welcome-message">স্বাগতম, লোড হচ্ছে...</div>
        <button id="logout-btn" onclick="logout()">লগআউট</button>
    </header>

    <div id="content">
        <h2>সনদ তৈরি এবং যাচাইকরণ প্যানেল</h2>
        <div id="cert-tool">
            <p>আপনার সনদ তৈরির সরঞ্জামাদি এখানে থাকবে।</p>
            </div>
    </div>
    
    <script>
        // ----------------- Firebase Configuration -----------------
        // For Firebase JS SDK v7.20.0 and later, measurementId is optional
const firebaseConfig = {
  apiKey: "AIzaSyA1fCD4rPhcosqGzk6iHltDI3ePFR4JNEY",
  authDomain: "comillalg-gov-bd.firebaseapp.com",
  databaseURL: "https://comillalg-gov-bd-default-rtdb.firebaseio.com",
  projectId: "comillalg-gov-bd",
  storageBucket: "comillalg-gov-bd.firebasestorage.app",
  messagingSenderId: "906711849504",
  appId: "1:906711849504:web:d4dc33382d37abe9d93a45",
  measurementId: "G-F9GZKXH3QL"
};
        firebase.initializeApp(firebaseConfig);
        const database = firebase.database();
        const auth = firebase.auth(); 

        // ----------------- Authentication State Check -----------------
        
        // ব্যবহারকারী লগইন করা আছে কিনা এবং অনুমোদিত কিনা তা যাচাই করা
        auth.onAuthStateChanged(user => {
            if (user) {
                // ইউজার লগইন করা আছে, এখন স্ট্যাটাস চেক করুন
                database.ref('sub_admin_requests/' + user.uid).once('value')
                    .then(snapshot => {
                        const userData = snapshot.val();
                        if (userData && userData.status === 'Approved') {
                            // অনুমোদিত: ড্যাশবোর্ড কন্টেন্ট দেখান
                            document.getElementById('welcome-message').textContent = `স্বাগতম, ${userData.name_bn}!`;
                        } else {
                            // অনুমোদিত নয়: লগআউট করুন এবং Auth পেজে ফেরত পাঠান
                            auth.signOut();
                            window.location.href = 'sub-admin-auth.html';
                        }
                    });
            } else {
                // ইউজার লগইন করা নেই: Auth পেজে ফেরত পাঠান
                window.location.href = 'sub-admin-auth.html';
            }
        });

        // ----------------- লগআউট ফাংশন -----------------
        function logout() {
            auth.signOut().then(() => {
                window.location.href = 'sub-admin-auth.html';
            });
        }

        // এখানে আপনার সনদ তৈরির অন্যান্য ফাংশন যুক্ত করুন
    </script>
</body>
  </html>
